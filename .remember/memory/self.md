# Self Memory - Error Records

This file stores all encountered errors and their correction methods.

## Format
```
Mistake: [Short Description]
Wrong:
[Insert incorrect code or logic]
Correct:
[Insert corrected code or logic]
```

## GMAT Vç§‘æ–‡æª”é€ç« ç¯€æ¯”å°èˆ‡çµ±ä¸€åŒ–ä¿®å¾© (2025-06-01)

**Status: COMPLETED âœ…**

Successfully completed comprehensive chapter-by-chapter comparison between Chinese V documentation (v1.6) and English V documentation (v1.3), implementing all necessary modifications to ensure complete consistency.

### æ¯”å°ç™¼ç¾çš„ä¸»è¦ä¸ä¸€è‡´ä¹‹è™•:

**1. ç¬¬ä¸‰ç« è¨ºæ–·åƒæ•¸ç³»çµ±å®Œå…¨ä¸åŒ:**
- ä¸­æ–‡æ–‡æª”v1.6ä½¿ç”¨è©³ç´°çš„åˆ†å±¤è¨ºæ–·åƒæ•¸ç³»çµ±
- è‹±æ–‡æ–‡æª”v1.3ä½¿ç”¨ç°¡åŒ–çš„è¨ºæ–·åƒæ•¸ç³»çµ±

**2. è¨ºæ–·æ¨™ç±¤ç²¾ç¢ºæ€§é™åˆ¶èªªæ˜ç¼ºå¤±:**
- ä¸­æ–‡æ–‡æª”åŒ…å«é‡è¦çš„è¨ºæ–·é™åˆ¶èªªæ˜
- è‹±æ–‡æ–‡æª”ç¼ºå°‘ç›¸æ‡‰èªªæ˜

**3. æœªä¾†æ”¹é€²æ©Ÿåˆ¶èªªæ˜ç¼ºå¤±:**
- ä¸­æ–‡æ–‡æª”åŒ…å«SFEæœªä¾†æ”¹é€²æ©Ÿåˆ¶çš„è©³ç´°èªªæ˜
- è‹±æ–‡æ–‡æª”ç¼ºå°‘æ­¤éƒ¨åˆ†

**4. é™„éŒ„Aè¨ºæ–·åƒæ•¸å°ç…§è¡¨ä¸ä¸€è‡´:**
- ä¸­æ–‡æ–‡æª”ä½¿ç”¨å®Œæ•´çš„åˆ†å±¤åƒæ•¸ç³»çµ±
- è‹±æ–‡æ–‡æª”ä½¿ç”¨èˆŠç‰ˆç°¡åŒ–åƒæ•¸ç³»çµ±

### ä¿®å¾©å¯¦æ–½:

**ä¿®å¾©1: ç¬¬ä¸‰ç« è¨ºæ–·åƒæ•¸å®Œå…¨æ›´æ–°**

Mistake: è‹±æ–‡æ–‡æª”ä½¿ç”¨èˆŠç‰ˆç°¡åŒ–è¨ºæ–·åƒæ•¸ç³»çµ±
Wrong:
```markdown
# èˆŠç‰ˆç°¡åŒ–åƒæ•¸å¦‚:
- CR_READING_BASIC_OMISSION
- CR_METHOD_PROCESS_DEVIATION
- RC_READING_INFO_LOCATION_ERROR
```

Correct:
```markdown
# æ–°ç‰ˆè©³ç´°åˆ†å±¤åƒæ•¸å¦‚:
- CR_STEM_UNDERSTANDING_ERROR_QUESTION_REQUIREMENT_GRASP
- CR_REASONING_ERROR_LOGIC_CHAIN_ANALYSIS_PREMISE_CONCLUSION_RELATIONSHIP
- RC_READING_COMPREHENSION_ERROR_VOCAB
- RC_CHOICE_ANALYSIS_ERROR_STRONG_DISTRACTOR_CONFUSION
```

**ä¿®å¾©2: æ·»åŠ è¨ºæ–·æ¨™ç±¤ç²¾ç¢ºæ€§é™åˆ¶èªªæ˜**

Mistake: ç¼ºå°‘è¨ºæ–·æ¨™ç±¤ç²¾ç¢ºæ€§é™åˆ¶çš„é‡è¦èªªæ˜
Wrong:
```markdown
# ç›´æ¥é€²å…¥è¨ºæ–·æµç¨‹ï¼Œç„¡ç²¾ç¢ºæ€§é™åˆ¶èªªæ˜
3. Diagnostic Flow and Analysis Points
```

Correct:
```markdown
# æ·»åŠ å®Œæ•´çš„ç²¾ç¢ºæ€§é™åˆ¶èªªæ˜
ğŸ“‹ **Important Note: Diagnostic Label Precision Limitations**

**Note:** The diagnostic parameters listed below represent general possible causes...
**Recommended Process:**
1. The system provides diagnostic parameters as **possible ranges**
2. Combine with student recall of specific difficulties encountered
3. Refer to secondary evidence or conduct qualitative analysis if necessary
4. Finally determine the applicable precise diagnostic labels
```

**ä¿®å¾©3: æ·»åŠ æœªä¾†æ”¹é€²æ©Ÿåˆ¶èªªæ˜**

Mistake: ç¼ºå°‘SFEæœªä¾†æ”¹é€²æ©Ÿåˆ¶èªªæ˜
Wrong:
```markdown
# åƒ…æœ‰åŸºæœ¬SFEå®šç¾©ï¼Œç„¡æœªä¾†æ”¹é€²èªªæ˜
- Priority Handling: When generating practice recommendations...
```

Correct:
```markdown
ğŸ”§ **Future Improvement Mechanism Description**

**Note:** The current SFE judgment mechanism is based on simple difficulty comparison logic...

1. **Weighted SFE Mechanism**: Multi-dimensional weighted calculation...
2. **Contextual Awareness SFE**: Considering test context, learning phase...
3. **Dynamic Threshold Adjustment**: Dynamically adjusting SFE trigger conditions...
4. **Multi-level SFE Classification**: Distinguishing different severity levels...
```

**ä¿®å¾©4: é™„éŒ„Aè¨ºæ–·åƒæ•¸å°ç…§è¡¨å®Œå…¨æ›´æ–°**

Mistake: ä½¿ç”¨èˆŠç‰ˆç°¡åŒ–çš„è¨ºæ–·åƒæ•¸å°ç…§è¡¨
Wrong:
```markdown
| CR_READING_BASIC_OMISSION | CR é–±è®€ç†è§£: åŸºç¤ç†è§£ç–æ¼ |
| CR_REASONING_CHAIN_ERROR | CR æ¨ç†éšœç¤™: é‚è¼¯éˆåˆ†æéŒ¯èª¤ |
```

Correct:
```markdown
| CR_STEM_UNDERSTANDING_ERROR_QUESTION_REQUIREMENT_GRASP | CR é¡Œå¹¹ç†è§£éŒ¯èª¤ï¼šæå•è¦æ±‚æŠŠæ¡éŒ¯èª¤ |
| CR_REASONING_ERROR_LOGIC_CHAIN_ANALYSIS_PREMISE_CONCLUSION_RELATIONSHIP | CR æ¨ç†éŒ¯èª¤: é‚è¼¯éˆåˆ†æéŒ¯èª¤ (å‰æèˆ‡çµè«–é—œä¿‚) |
```

**ä¿®å¾©5: åƒæ•¸åç¨±çµ±ä¸€åŒ–**

Mistake: FOUNDATIONAL_MASTERY_INSTABILITY_SFEåƒæ•¸åç¨±ä¸ä¸€è‡´
Wrong:
```markdown
FOUNDATIONAL_MASTERY_INSTABILITY_SFE
```

Correct:
```markdown
FOUNDATIONAL_MASTERY_APPLICATION_INSTABILITY_SFE
```

### ä¿®å¾©çµæœ:
1. âœ… ç¬¬ä¸‰ç« è¨ºæ–·åƒæ•¸ç³»çµ±å®Œå…¨çµ±ä¸€ - Fast & Wrong, Normal Time & Wrong, Slow & Wrong, Slow & Correctæ‰€æœ‰åˆ†é¡çš„åƒæ•¸åˆ—è¡¨å·²æ›´æ–°
2. âœ… è¨ºæ–·æ¨™ç±¤ç²¾ç¢ºæ€§é™åˆ¶èªªæ˜å·²æ·»åŠ  - åŒ…å«å®Œæ•´çš„é™åˆ¶èªªæ˜å’Œå»ºè­°æµç¨‹
3. âœ… æœªä¾†æ”¹é€²æ©Ÿåˆ¶èªªæ˜å·²æ·»åŠ  - åŒ…å«å››å€‹æ”¹é€²æ–¹å‘çš„è©³ç´°æè¿°
4. âœ… é™„éŒ„Aè¨ºæ–·åƒæ•¸å°ç…§è¡¨å®Œå…¨æ›´æ–° - åŒ…å«æ‰€æœ‰åˆ†å±¤è¨ºæ–·åƒæ•¸çš„å®Œæ•´æ˜ å°„
5. âœ… åƒæ•¸åç¨±çµ±ä¸€åŒ–å®Œæˆ - æ‰€æœ‰FOUNDATIONAL_MASTERYç›¸é—œåƒæ•¸åç¨±å·²çµ±ä¸€

**æœ€çµ‚ç‹€æ…‹:** è‹±æ–‡æ–‡æª”en-gmat-v-v1.3.mdç¾å·²èˆ‡ä¸­æ–‡æ–‡æª”gmat-v-score-logic-dustin-v1.6.mdå®Œå…¨ä¸€è‡´ï¼Œå¯¦ç¾äº†é€ç« ç¯€å…§å®¹çš„å®Œæ•´çµ±ä¸€ã€‚

## è¨ºæ–·æ¨™ç±¤ä¿®å‰ªåŠ©æ‰‹ç¿»è­¯å•é¡Œä¿®å¾© (2025-06-01)

**Status: FIXED âœ…**

Successfully fixed Traditional Chinese translation issues in the diagnostic tag trimming assistant interface.

### å•é¡Œæè¿°:
ç”¨æˆ¶åæ‡‰ç•¶i18nè¨­å®šç‚ºç¹é«”ä¸­æ–‡æ™‚ï¼Œè¨ºæ–·æ¨™ç±¤ä¿®å‰ªåŠ©æ‰‹çš„ç•Œé¢ä»ç„¶é¡¯ç¤ºè‹±æ–‡å…§å®¹ã€‚

### æ ¹æœ¬åŸå› :
ç¹é«”ä¸­æ–‡ç¿»è­¯æª”æ¡ˆ(zh_TW.py)ä¸­çš„æ¨™ç±¤ä¿®å‰ªç›¸é—œç¿»è­¯keyå…¨éƒ¨æ˜¯è‹±æ–‡å…§å®¹ã€‚

### ä¿®å¾©éç¨‹:

**ä¿®å¾©çš„ç¿»è­¯keyåŒ…æ‹¬:**
- æ¨™ç±¤ä¿®å‰ªåŠ©æ‰‹æ¨™é¡Œå’Œæè¿°
- è¼¸å…¥æ¬„ä½æ¨™ç±¤
- æŒ‰éˆ•æ–‡å­— (Apply Changes, Reset, Download)
- éŒ¯èª¤å’ŒæˆåŠŸè¨Šæ¯
- AIå»ºè­°ç”Ÿæˆç›¸é—œæ–‡å­—
- æ–°è¨ºæ–·å ±å‘Šç›¸é—œæ–‡å­—
- é¡¯ç¤ºçµæœåˆ†é æ¨™ç±¤

Mistake: ç¹é«”ä¸­æ–‡ç¿»è­¯æª”æ¡ˆä¸­ä½¿ç”¨è‹±æ–‡å…§å®¹
Wrong:
```python
# zh_TW.pyä¸­çš„éŒ¯èª¤ç¿»è­¯
'tag_trimming_assistant_title': "Tag Trimming Assistant",
'tag_trimming_assistant_description': "This tool helps you select 1-2 most relevant core tags...",
'button_apply_changes': "âœ“ Apply Changes and Update Qualitative Analysis Output",
'display_results_edit_tags_tab': "Edit Diagnostic Tags & Update AI Suggestions",
```

Correct:
```python
# zh_TW.pyä¸­çš„æ­£ç¢ºç¿»è­¯
'tag_trimming_assistant_title': "è¨ºæ–·æ¨™ç±¤ä¿®å‰ªåŠ©æ‰‹",
'tag_trimming_assistant_description': "æ­¤å·¥å…·å¹«åŠ©æ‚¨æ ¹æ“šæ‚¨å°è©²é¡Œç›®çš„å…·é«”æè¿°ï¼Œå¾ä¸€é•·ä¸²åŸå§‹è¨ºæ–·æ¨™ç±¤ä¸­ç¯©é¸å‡º 1-2 å€‹æœ€ç›¸é—œçš„æ ¸å¿ƒæ¨™ç±¤...",
'button_apply_changes': "âœ“ å¥—ç”¨è®Šæ›´ä¸¦æ›´æ–°è³ªåŒ–åˆ†æè¼¸å‡º",
'display_results_edit_tags_tab': "ç·¨è¼¯è¨ºæ–·æ¨™ç±¤èˆ‡æ›´æ–° AI å»ºè­°",
```

### DIæ•¸æ“šå‚³éæª¢æŸ¥çµæœ:

**èª¿æŸ¥ç™¼ç¾:**
1. âœ… apply changesæŒ‰éˆ•é‚è¼¯æ­£ç¢º - æœƒåŒæ™‚èª¿ç”¨æ–°è¨ºæ–·å ±å‘Šç”Ÿæˆå’ŒAIå»ºè­°ç”Ÿæˆ
2. âœ… DI AIå»ºè­°ç”Ÿæˆå‡½æ•¸æ­£å¸¸ - `generate_di_ai_tool_recommendations`å‡½æ•¸å­˜åœ¨ä¸”é‚è¼¯å®Œæ•´
3. âœ… æ–°è¨ºæ–·å ±å‘Šä¸­DIè™•ç†é‚è¼¯æ­£ç¢º - `generate_new_diagnostic_report`åŒ…å«å®Œæ•´çš„DIåˆ†é¡é‚è¼¯
4. âœ… DIç›¸é—œç¿»è­¯keyå·²ä¿®æ­£ - å ±å‘Šç”Ÿæˆç›¸é—œçš„è‹±æ–‡ç¿»è­¯å·²æ”¹ç‚ºç¹é«”ä¸­æ–‡

**å¯èƒ½å•é¡Œ:**
- å¦‚æœDIæ–°è¨ºæ–·å ±å‘Šä»æœªé¡¯ç¤ºï¼Œå¯èƒ½æ˜¯æ•¸æ“šæœ¬èº«å•é¡Œ(å¦‚ç¼ºå°‘å¿…è¦æ¬„ä½)æˆ–AIå»ºè­°å‡½æ•¸åŸ·è¡Œä¸­çš„éŒ¯èª¤
- å»ºè­°ç”¨æˆ¶æª¢æŸ¥æ˜¯å¦æœ‰DIæ•¸æ“šï¼Œä»¥åŠæ˜¯å¦æœ‰JavaScriptæ§åˆ¶å°éŒ¯èª¤

### ä¿®å¾©æ•ˆæœ:
1. âœ… æ¨™ç±¤ä¿®å‰ªåŠ©æ‰‹ç•Œé¢å®Œå…¨ç¹é«”ä¸­æ–‡åŒ–
2. âœ… Apply ChangesæŒ‰éˆ•å’Œç›¸é—œæç¤ºå®Œå…¨ç¹é«”ä¸­æ–‡åŒ–  
3. âœ… æ–°è¨ºæ–·å ±å‘Šå’ŒAIå»ºè­°ç•Œé¢å®Œå…¨ç¹é«”ä¸­æ–‡åŒ–
4. âœ… é¡¯ç¤ºçµæœåˆ†é æ¨™ç±¤å®Œå…¨ç¹é«”ä¸­æ–‡åŒ–

## Væ¨¡çµ„ log_exceptions æœªå®šç¾©éŒ¯èª¤ä¿®å¾© (2025-06-01)

**Status: FIXED âœ…**

Successfully fixed undefined `log_exceptions` function error in V diagnosis module.

### å•é¡Œæè¿°:
Væ¨¡çµ„ main.py ä¸­ä½¿ç”¨äº† `log_exceptions` ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œä½†è©²å‡½æ•¸æœªå®šç¾©æˆ–åŒ¯å…¥ï¼Œå°è‡´åŸ·è¡Œæ™‚éŒ¯èª¤ã€‚

### ä¿®å¾©éç¨‹:

**1. éŒ¯èª¤åˆ†æ:**
- Væ¨¡çµ„ main.py ç¬¬68è¡Œä½¿ç”¨ `with log_exceptions("V Diagnosis"):`
- å‡½æ•¸æœªåœ¨ä»»ä½•åœ°æ–¹å®šç¾©æˆ–åŒ¯å…¥
- åœ¨ debug_utils.py ä¸­ç™¼ç¾é¡ä¼¼çš„ `DebugContext` é¡

**2. è§£æ±ºæ–¹æ¡ˆå¯¦æ–½:**

Mistake: Væ¨¡çµ„ä½¿ç”¨æœªå®šç¾©çš„ log_exceptions å‡½æ•¸
Wrong:
```python
# ç¼ºå°‘æ­£ç¢ºçš„åŒ¯å…¥
from gmat_diagnosis_app.i18n import translate as t

# ä½¿ç”¨æœªå®šç¾©çš„å‡½æ•¸
with log_exceptions("V Diagnosis"):
    # è¨ºæ–·é‚è¼¯...
```

Correct:
```python
# æ·»åŠ æ­£ç¢ºçš„é™¤éŒ¯å·¥å…·åŒ¯å…¥
from gmat_diagnosis_app.utils.debug_utils import DebugContext
from gmat_diagnosis_app.i18n import translate as t

# ä½¿ç”¨æ­£ç¢ºçš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨
with DebugContext("V Diagnosis"):
    # è¨ºæ–·é‚è¼¯...
```

## çµ‚ç«¯æ©ŸéŒ¯èª¤ä¿®å¾©å’Œæ–‡æª”å‘½åçµ±ä¸€åŒ– (2025-06-01)

**Status: FIXED âœ…**

Successfully fixed terminal errors and documentation parameter naming inconsistencies.

### 1. çµ‚ç«¯æ©ŸéŒ¯èª¤ä¿®å¾©:

**1.1 subject_excel_map æœªå®šç¾©éŒ¯èª¤:**

Mistake: subject_excel_map è®Šæ•¸åœ¨ç•°å¸¸è™•ç†å€å¡Šä¸­æœªå®šç¾©å°±è¢«ä½¿ç”¨
Wrong:
```python
def display_subject_results(...):
    if df_subject is not None and not df_subject.empty:
        subject_excel_map = {...}  # åªåœ¨æ¢ä»¶å…§å®šç¾©
    try:
        # ä¸€äº›æ“ä½œ...
    except Exception as e:
        logging.error(f"Error in {subject_excel_map}...")  # è®Šæ•¸å¯èƒ½æœªå®šç¾©
```

Correct:
```python
def display_subject_results(...):
    # åœ¨å‡½æ•¸é–‹å§‹å°±å®šç¾©è®Šæ•¸
    subject_excel_map = {
        "Subject": t("column_subject"),
        # ... å…¶ä»–æ˜ å°„
    }
    if df_subject is not None and not df_subject.empty:
        # é‚è¼¯è™•ç†...
    try:
        # ä¸€äº›æ“ä½œ...
    except Exception as e:
        logging.error(f"Error in {subject_excel_map}...")  # è®Šæ•¸å·²å®šç¾©
```

**1.2 DIç¿»è­¯å­—å…¸åŒ¯å…¥éŒ¯èª¤:**

Mistake: å˜—è©¦åŒ¯å…¥å·²é·ç§»åˆ°çµ±ä¸€i18nç³»çµ±çš„èˆŠç¿»è­¯å¸¸æ•¸
Wrong:
```python
try:
    from gmat_diagnosis_app.diagnostics.di_modules.constants import APPENDIX_A_TRANSLATION_DI
    # ... ä½¿ç”¨èˆŠç¿»è­¯ç³»çµ±
except ImportError:
    logging.warning("ç„¡æ³•åŒ¯å…¥DIç§‘ç›®ç¿»è­¯å­—å…¸")
```

Correct:
```python
# ç§»é™¤å·²é·ç§»çš„DIç¿»è­¯å­—å…¸åŒ¯å…¥
# DI modules have migrated to unified i18n system
# Translation mappings are now handled through central i18n system
```

### 2. æ–‡æª”åƒæ•¸å‘½åçµ±ä¸€åŒ–ä¿®å¾©:

**2.1 Qç§‘æ–‡æª”ä¿®æ­£:**

Mistake: Qç§‘æ–‡æª”ä¸­SFEæ¨™ç±¤ä½¿ç”¨å–®ä¸‹åŠƒç·šè€Œä»£ç¢¼ä½¿ç”¨é›™ä¸‹åŠƒç·š
Wrong:
```markdown
Q_FOUNDATIONAL_MASTERY_INSTABILITY_SFE
```

Correct:
```markdown
Q_FOUNDATIONAL_MASTERY_INSTABILITY__SFE
```

**2.2 DIç§‘æ–‡æª”ä¿®æ­£:**

Mistake: DIç§‘æ–‡æª”ä¸­ä½¿ç”¨å·²å»¢æ£„çš„è¡Œç‚ºæ¨™ç±¤
Wrong:
```markdown
DI_BEHAVIOR__CARELESSNESS_DETAIL_OMISSION
```

Correct:
```markdown
DI_BEHAVIOR__CARELESSNESS_ISSUE  # çµ±ä¸€ä½¿ç”¨æ­¤æ¨™ç±¤
```

**2.3 Vç§‘æ–‡æª”é©—è­‰:**
âœ… Vç§‘æ–‡æª”å’Œä»£ç¢¼å‘½åå·²ä¸€è‡´ï¼Œç„¡éœ€ä¿®æ­£
- ä½¿ç”¨ `CR_STEM_UNDERSTANDING_ERROR_VOCAB` æ ¼å¼
- ä½¿ç”¨ `RC_READING_COMPREHENSION_ERROR_VOCAB` æ ¼å¼
- ä½¿ç”¨ `FOUNDATIONAL_MASTERY_APPLICATION_INSTABILITY_SFE` æ ¼å¼

### çµæœç¸½çµ:
1. âœ… ä¿®æ­£äº†2å€‹çµ‚ç«¯æ©ŸåŸ·è¡ŒéŒ¯èª¤
2. âœ… çµ±ä¸€äº†Qç§‘ã€DIç§‘æ–‡æª”èˆ‡ä»£ç¢¼çš„åƒæ•¸å‘½å
3. âœ… ç¢ºèªäº†Vç§‘æ–‡æª”å‘½åä¸€è‡´æ€§
4. âœ… ç§»é™¤äº†å·²å»¢æ£„çš„ç¿»è­¯ç³»çµ±å¼•ç”¨

## Route Tool Vç§‘ç›®ç¿»è­¯åŒ¯å…¥éŒ¯èª¤ä¿®å¾© (2025-06-01)

**Status: FIXED âœ…**

Successfully fixed V module translation import error in route_tool.py and completed DI parameter translation consistency check.

### 1. Route ToolåŒ¯å…¥è·¯å¾‘éŒ¯èª¤ä¿®å¾©:

**å•é¡Œæè¿°:**
route_tool.py ä¸­å˜—è©¦å¾éŒ¯èª¤è·¯å¾‘åŒ¯å…¥Vç§‘ç›®ç¿»è­¯å­—å…¸ï¼Œå°è‡´å‡½æ•¸èª¿ç”¨å¤±æ•—ã€‚

Mistake: Route toolä¸­Vç§‘ç›®ç¿»è­¯å­—å…¸åŒ¯å…¥è·¯å¾‘éŒ¯èª¤
Wrong:
```python
# éŒ¯èª¤çš„åŒ¯å…¥å˜—è©¦ï¼ˆè·¯å¾‘ä¸å­˜åœ¨ï¼‰
from gmat_diagnosis_app.diagnostics.v_modules.constants import APPENDIX_A_TRANSLATION_V
```

Correct:
```python
# æ­£ç¢ºçš„åŒ¯å…¥è·¯å¾‘
from gmat_diagnosis_app.diagnostics.v_modules.translations import APPENDIX_A_TRANSLATION_V
```

### 2. DIåƒæ•¸ç¿»è­¯ä¸€è‡´æ€§æª¢æŸ¥èˆ‡ä¿®å¾©:

**å•é¡Œæè¿°:**
ç™¼ç¾æ–‡æª”ä¸­å­˜åœ¨ä½†ç¿»è­¯æª”æ¡ˆä¸­ç¼ºå¤±çš„ä¸‰å€‹DIè¨ºæ–·åƒæ•¸ï¼Œå°è‡´ç¿»è­¯ç³»çµ±ä¸å®Œæ•´ã€‚

**ç¼ºå¤±åƒæ•¸è­˜åˆ¥:**
é€šéå°æ¯” `gmat-di-score-logic-dustin-v1.6.md` æ–‡æª”å’Œä»£ç¢¼ï¼Œç™¼ç¾ä»¥ä¸‹åƒæ•¸å­˜åœ¨æ–¼æ–‡æª”å’Œconstants.pyä¸­ï¼Œä½†è‹±æ–‡ç¿»è­¯æª”æ¡ˆç¼ºå¤±å°æ‡‰ç¿»è­¯ï¼š

Mistake: è‹±æ–‡ç¿»è­¯æª”æ¡ˆä¸­ç¼ºå¤±ä¸‰å€‹DIè¨ºæ–·åƒæ•¸çš„ç¿»è­¯
Wrong:
```python
# en.py ä¸­ç¼ºå¤±ä»¥ä¸‹ç¿»è­¯keys
# DI_DATA_EXTRACTION_ERROR
# DI_INFORMATION_EXTRACTION_INFERENCE_ERROR  
# DI_QUESTION_TYPE_SPECIFIC_ERROR
```

Correct:
```python
# åœ¨ en.py ä¸­æ·»åŠ å®Œæ•´çš„DIåƒæ•¸ç¿»è­¯
'DI_DATA_EXTRACTION_ERROR': "DI Data Extraction (GT): Data extraction error from charts",
'DI_INFORMATION_EXTRACTION_INFERENCE_ERROR': "DI Information Extraction/Inference (GT/MSR Non-Math): Information location/inference error",
'DI_QUESTION_TYPE_SPECIFIC_ERROR': "DI Question Type Specific Error (e.g., MSR Non-Math subtypes)",
```

### 3. ç³»çµ±æ¸¬è©¦èˆ‡é©—è­‰:

**æ¸¬è©¦çµæœ:**
âœ… Route tool æˆåŠŸåˆå§‹åŒ–
âœ… DIåƒæ•¸ç¿»è­¯åœ¨ä¸­æ–‡å’Œè‹±æ–‡æª”æ¡ˆä¸­éƒ½å­˜åœ¨
âœ… ç¿»è­¯ç³»çµ±æ­£å¸¸å·¥ä½œï¼Œèƒ½å¤ æ­£ç¢ºè¿”å›ä¸­æ–‡ç¿»è­¯
âœ… ä¸»æ‡‰ç”¨ç¨‹å¼èƒ½æ­£å¸¸åŒ¯å…¥

### ä¿®å¾©ç¸½çµ:
1. âœ… ä¿®æ­£äº†route_tool.pyä¸­Vç§‘ç›®ç¿»è­¯åŒ¯å…¥è·¯å¾‘éŒ¯èª¤  
2. âœ… è­˜åˆ¥ä¸¦è£œå……äº†3å€‹ç¼ºå¤±çš„DIåƒæ•¸è‹±æ–‡ç¿»è­¯
3. âœ… ç¢ºèªDIæ–‡æª”èˆ‡ä»£ç¢¼åƒæ•¸å‘½åä¸€è‡´æ€§
4. âœ… é©—è­‰ä¿®å¾©å¾Œç³»çµ±é‹è¡Œæ­£å¸¸

**å½±éŸ¿ç¯„åœ:**
- Route toolåŠŸèƒ½æ¢å¾©æ­£å¸¸
- DIè¨ºæ–·åƒæ•¸ç¿»è­¯ç³»çµ±å®Œæ•´æ€§æå‡
- é›™èªæ”¯æŒç³»çµ±æ›´åŠ å®Œå–„

## DIè¨ºæ–·æ¨™ç±¤å’Œæ™‚é–“è¡¨ç¾æ•¸æ“šæ¶ˆå¤±å•é¡Œä¿®å¾© (2025-06-01)

**Status: COMPLETELY FIXED âœ…**

æˆåŠŸä¿®å¾©DIè¨ºæ–·å ±å‘Šä¸­è¨ºæ–·æ¨™ç±¤å’Œæ™‚é–“è¡¨ç¾æ•¸æ“šæ¶ˆå¤±çš„å•é¡Œï¼ŒåŒ…æ‹¬æ‰€æœ‰ç¿»è­¯å•é¡Œã€‚

### å•é¡Œæè¿°:
ç”¨æˆ¶åæ‡‰DIçš„è¨ºæ–·å ±å‘Šä¸­ï¼Œè¨ºæ–·æ¨™ç±¤å’Œæ™‚é–“è¡¨ç¾çš„æ•¸æ“šéƒ½æ¶ˆå¤±äº†ã€‚

### æ ¹æœ¬åŸå› :
1. DIæ¨¡çµ„ä¸­çš„ `process_question_type` å‡½æ•¸æ˜¯ç©ºçš„å¯¦ç¾ï¼Œæ²’æœ‰å¯¦éš›è¨ˆç®—è¨ºæ–·æ¨™ç±¤å’Œæ™‚é–“è¡¨ç¾åˆ†é¡
2. éƒ¨åˆ†è¨ºæ–·åƒæ•¸å­˜åœ¨å‘½åä¸ä¸€è‡´å•é¡Œ
3. ä¸‰å€‹æ•ˆç‡ç“¶é ¸åƒæ•¸ç¼ºå¤±ç¿»è­¯

### ä¿®å¾©å…§å®¹:

**1. å¯¦ç¾å®Œæ•´çš„ `process_question_type` å‡½æ•¸**:
âœ… æ·»åŠ æ™‚é–“è¡¨ç¾åˆ†é¡è¨ˆç®—é‚è¼¯ (Fast & Wrong, Normal Time & Wrong, Slow & Wrong, Slow & Correctç­‰)
âœ… å¯¦ç¾SFE (Systematic Foundational Error) æª¢æ¸¬
âœ… æ·»åŠ åŸºæ–¼æ™‚é–“å’Œé›£åº¦çš„è¨ºæ–·åƒæ•¸åˆ†é…

**2. æ–°å¢çš„è¼”åŠ©å‡½æ•¸**:
âœ… `calculate_time_performance_category`: è¨ˆç®—æ™‚é–“è¡¨ç¾åˆ†é¡
âœ… `get_max_correct_difficulty`: ç²å–SFEæª¢æ¸¬æ‰€éœ€çš„æœ€å¤§æ­£ç¢ºé›£åº¦
âœ… `get_time_specific_parameters`: åŸºæ–¼æ™‚é–“è¡¨ç¾æ·»åŠ è¨ºæ–·åƒæ•¸
âœ… `get_difficulty_specific_parameters`: åŸºæ–¼é›£åº¦æ·»åŠ è¨ºæ–·åƒæ•¸
âœ… `calculate_override_conditions`: è¨ˆç®—macroå»ºè­°è§¸ç™¼æ¢ä»¶

**3. å¯¦ç¾çš„æ ¸å¿ƒé‚è¼¯**:
âœ… æ™‚é–“ç›¸å°å¿«æ…¢åˆ¤æ–· (åŸºæ–¼RELATIVELY_FAST_MULTIPLIER)
âœ… å…­ç¨®æ™‚é–“è¡¨ç¾åˆ†é¡: Fast/Normal/Slow + Correct/Wrong
âœ… SFEæª¢æ¸¬: éŒ¯é¡Œé›£åº¦ä½æ–¼è©²é¡Œå‹æœ€é«˜ç­”å°é›£åº¦
âœ… è¨ºæ–·åƒæ•¸åˆ†é…: åŸºæ–¼é¡Œå‹ã€å…§å®¹é ˜åŸŸã€æ™‚é–“è¡¨ç¾çµ„åˆ

**4. ä¿®å¾©çš„å•é¡Œ**:
âœ… å‘½åä¸ä¸€è‡´å•é¡Œ: `DI_BEHAVIOR__EARLY_RUSHING_FLAG_RISK` â†’ `DI_BEHAVIOR_EARLY_RUSHING_FLAG_RISK`
âœ… æ·»åŠ ç¼ºå¤±çš„ç¿»è­¯åƒæ•¸:
   - `DI_EFFICIENCY_BOTTLENECK_LOGIC`
   - `DI_EFFICIENCY_BOTTLENECK_GRAPH_TABLE`
   - `DI_EFFICIENCY_BOTTLENECK_INTEGRATION`

### ä¿®å¾©æ•ˆæœ:
1. âœ… DIè¨ºæ–·å ±å‘Šç¾åœ¨æœƒæ­£ç¢ºé¡¯ç¤ºæ™‚é–“è¡¨ç¾åˆ†é¡
2. âœ… è¨ºæ–·æ¨™ç±¤æœƒæ ¹æ“šè¡¨ç¾æ¨¡å¼æ­£ç¢ºç”Ÿæˆ
3. âœ… SFEæª¢æ¸¬æ­£å¸¸å·¥ä½œ
4. âœ… Macroå’ŒCaseå»ºè­°æœƒåŸºæ–¼å¯¦éš›è¨ºæ–·çµæœè§¸ç™¼
5. âœ… èˆ‡Vã€Qæ¨¡çµ„çš„å¯¦ç¾æ¨¡å¼ä¿æŒä¸€è‡´
6. âœ… æ‰€æœ‰è¨ºæ–·åƒæ•¸éƒ½æœ‰æ­£ç¢ºçš„ä¸­è‹±æ–‡ç¿»è­¯
7. âœ… åƒæ•¸å‘½åèˆ‡ç¿»è­¯ç³»çµ±å®Œå…¨ä¸€è‡´

### æŠ€è¡“ç´°ç¯€:
- ä½¿ç”¨RELATIVELY_FAST_MULTIPLIER (0.8) åˆ¤æ–·ç›¸å°å¿«é€Ÿ
- å¯¦ç¾å…­ç¨®æ™‚é–“è¡¨ç¾åˆ†é¡çš„å®Œæ•´é‚è¼¯
- æ·»åŠ é¡Œå‹ç‰¹å®šçš„è¨ºæ–·åƒæ•¸æ˜ å°„
- æ”¯æ´æ•¸å­¸ç›¸é—œ/éæ•¸å­¸ç›¸é—œå…§å®¹é ˜åŸŸçš„ä¸åŒåƒæ•¸
- å¯¦ç¾å®Œæ•´çš„overrideæ¢ä»¶è¨ˆç®— (éŒ¯èª¤ç‡â‰¥40% æˆ– è¶…æ™‚ç‡â‰¥30%)
- ä¿®å¾©æ‰€æœ‰ç¿»è­¯ç³»çµ±ç›¸é—œå•é¡Œ

Mistake: DIæ¨¡çµ„process_question_typeå‡½æ•¸ç‚ºç©ºå¯¦ç¾ + åƒæ•¸å‘½åä¸ä¸€è‡´ + ç¼ºå¤±ç¿»è­¯
Wrong:
```python
def process_question_type(q_type_df, q_type, avg_times, max_diffs, ch1_thresholds):
    """Process diagnostic logic for a specific question type."""
    # Implementation details...
    # (This is a simplified version - the actual implementation would be more complex)
    
    override_info = {
        'override_triggered': False,
        'Y_agg': None,
        'Z_agg': None,
        'triggering_error_rate': 0.0,
        'triggering_overtime_rate': 0.0
    }
    
    return q_type_df, override_info

# éŒ¯èª¤çš„åƒæ•¸å‘½å
'DI_BEHAVIOR__EARLY_RUSHING_FLAG_RISK'

# ç¼ºå¤±çš„ç¿»è­¯åƒæ•¸
# DI_EFFICIENCY_BOTTLENECK_* åƒæ•¸ç„¡ç¿»è­¯
```

Correct:
```python
def process_question_type(q_type_df, q_type, avg_times, max_diffs, ch1_thresholds):
    """
    Process diagnostic logic for a specific question type.
    Implementation of DI Chapter 3 diagnostic rules.
    """
    # å®Œæ•´å¯¦ç¾åŒ…æ‹¬:
    # 1. è¨ˆç®—æ™‚é–“è¡¨ç¾åˆ†é¡ (Fast/Slow/Normal + Correct/Wrong)  
    # 2. SFEæª¢æ¸¬ (éŒ¯é¡Œé›£åº¦ < æœ€é«˜ç­”å°é›£åº¦)
    # 3. åˆ†é…ç›¸æ‡‰çš„è¨ºæ–·åƒæ•¸ (åŸºæ–¼æ™‚é–“ã€é›£åº¦ã€é¡Œå‹)
    # 4. è¨ˆç®—overrideè§¸ç™¼æ¢ä»¶ (éŒ¯èª¤ç‡â‰¥40% æˆ– è¶…æ™‚ç‡â‰¥30%)
    
    processed_df = q_type_df.copy()
    
    # ç‚ºæ¯å€‹é¡Œç›®è¨ˆç®—æ™‚é–“è¡¨ç¾åˆ†é¡å’Œè¨ºæ–·åƒæ•¸
    for idx, row in processed_df.iterrows():
        time_category = calculate_time_performance_category(
            q_time, is_correct, is_overtime, avg_time
        )
        processed_df.loc[idx, 'time_performance_category'] = time_category
        
        # å°æœ‰æ•ˆé¡Œç›®é€²è¡Œè¨ºæ–·åƒæ•¸åˆ†é…
        if not is_invalid:
            # SFEæª¢æ¸¬ã€æ™‚é–“åƒæ•¸ã€é›£åº¦åƒæ•¸ç­‰
            # ...å®Œæ•´å¯¦ç¾é‚è¼¯
    
    return processed_df, override_info

# æ­£ç¢ºçš„åƒæ•¸å‘½å
'DI_BEHAVIOR_EARLY_RUSHING_FLAG_RISK' 

# å®Œæ•´çš„ç¿»è­¯åƒæ•¸
'DI_EFFICIENCY_BOTTLENECK_LOGIC': "DI æ•ˆç‡ç“¶é ¸: é‚è¼¯æ¨ç†é€Ÿåº¦",
'DI_EFFICIENCY_BOTTLENECK_GRAPH_TABLE': "DI æ•ˆç‡ç“¶é ¸: åœ–è¡¨è§£è®€é€Ÿåº¦", 
'DI_EFFICIENCY_BOTTLENECK_INTEGRATION': "DI æ•ˆç‡ç“¶é ¸: å¤šæºæ•´åˆé€Ÿåº¦",
```

### å¾ŒçºŒä¿®æ­£ (ç¬¬äºŒæ¬¡éŒ¯èª¤):
éŒ¯èª¤ä»ç„¶å‡ºç¾åœ¨ `process_question_type` å‡½æ•¸ç¬¬187è¡Œï¼Œç•¶è¨­ç½® `diagnostic_params` åˆ—è¡¨å€¼æ™‚ã€‚

**é€²ä¸€æ­¥ä¿®æ­£**: å°‡æ‰€æœ‰å–®è¡Œç´¢å¼•è¨­ç½®å¾ `.loc[idx, col]` æ”¹ç‚º `.at[idx, col]`
- `.at` æ–¹æ³•æ›´é©åˆè¨­ç½®å–®ä¸€ä½ç½®çš„å€¼ï¼Œç‰¹åˆ¥æ˜¯å°æ–¼åˆ—è¡¨ç­‰è¤‡é›œå°è±¡
- é¿å…äº† pandas åœ¨ `.loc` æ–¹æ³•ä¸­çš„ç´¢å¼•å°é½Šæª¢æŸ¥å°è‡´çš„éŒ¯èª¤
- æå‡äº†è¨­ç½®æ“ä½œçš„æ•ˆç‡å’Œç©©å®šæ€§

**å½±éŸ¿ç¯„åœ**:
- `processed_df.at[idx, 'diagnostic_params'] = current_params`
- `processed_df.at[idx, 'time_performance_category'] = time_category`  
- `processed_df.at[idx, 'is_sfe'] = True`

## DI æ¨¡çµ„ Pandas ç´¢å¼•è¨­ç½®éŒ¯èª¤ä¿®å¾© (2025-06-01)

**Status: FIXED âœ…**

Successfully fixed pandas DataFrame index assignment error in DI diagnosis module.

### å•é¡Œæè¿°:
DIæ¨¡çµ„åœ¨è¨ºæ–·éç¨‹ä¸­å‡ºç¾ `ValueError: Must have equal len keys and value when setting with an iterable` éŒ¯èª¤ï¼Œç™¼ç”Ÿåœ¨ analysis.py ç¬¬185è¡Œçš„ DataFrame ç´¢å¼•è¨­ç½®æ“ä½œã€‚

### æ ¹æœ¬åŸå› :
åœ¨ `diagnose_root_causes` å‡½æ•¸ä¸­ï¼Œç¬¬78è¡Œå˜—è©¦å°‡æ•´å€‹ processed_df è³¦å€¼çµ¦ df_diagnosed çš„å­é›†ï¼š
```python
df_diagnosed.loc[q_type_mask, :] = processed_df
```
é€™æœƒå°è‡´ç´¢å¼•å°é½Šå•é¡Œï¼Œç‰¹åˆ¥æ˜¯ç•¶å…©å€‹ DataFrame çš„ç´¢å¼•ä¸å®Œå…¨åŒ¹é…æ™‚ã€‚

### ä¿®å¾©éç¨‹:

Mistake: DataFrame æ•´è¡Œè³¦å€¼å°è‡´ç´¢å¼•å°é½ŠéŒ¯èª¤
Wrong:
```python
# å˜—è©¦æ•´è¡Œè³¦å€¼ï¼Œå¯èƒ½å°è‡´ç´¢å¼•ä¸åŒ¹é…
df_diagnosed.loc[q_type_mask, :] = processed_df
```

Correct:
```python
# åªæ›´æ–°éœ€è¦çš„ç‰¹å®šåˆ—ï¼Œä½¿ç”¨ .values é¿å…ç´¢å¼•å°é½Šå•é¡Œ
df_diagnosed.loc[q_type_mask, 'diagnostic_params'] = processed_df['diagnostic_params'].values
df_diagnosed.loc[q_type_mask, 'is_sfe'] = processed_df['is_sfe'].values
df_diagnosed.loc[q_type_mask, 'time_performance_category'] = processed_df['time_performance_category'].values
```

### æŠ€è¡“ç´°ç¯€:
1. **éŒ¯èª¤åŸå› **: pandas åœ¨é€²è¡Œ DataFrame è³¦å€¼æ™‚æœƒå˜—è©¦æŒ‰ç´¢å¼•å°é½Šæ•¸æ“šï¼Œç•¶ç´¢å¼•ä¸åŒ¹é…æ™‚æœƒç”¢ç”Ÿé•·åº¦ä¸ç­‰çš„éŒ¯èª¤
2. **è§£æ±ºæ–¹æ¡ˆ**: ä½¿ç”¨ `.values` å±¬æ€§ä¾†ç²å–åº•å±¤çš„ numpy æ•¸çµ„ï¼Œé¿å…ç´¢å¼•å°é½Šï¼Œåªæ›´æ–°ç‰¹å®šçš„å¿…è¦åˆ—
3. **å®‰å…¨æ€§**: é€™ç¨®æ–¹æ³•ç¢ºä¿åªæ›´æ–°è¨ºæ–·é‚è¼¯ä¸­å¯¦éš›ä¿®æ”¹çš„åˆ—ï¼Œé¿å…æ„å¤–è¦†è“‹å…¶ä»–æ•¸æ“š

### ä¿®å¾©æ•ˆæœ:
1. âœ… æ¶ˆé™¤äº† DataFrame ç´¢å¼•è³¦å€¼éŒ¯èª¤
2. âœ… ä¿æŒäº†è¨ºæ–·é‚è¼¯çš„å®Œæ•´æ€§
3. âœ… é¿å…äº†ç´¢å¼•å°é½Šå•é¡Œ
4. âœ… ç¢ºä¿äº†åªæ›´æ–°å¿…è¦çš„æ¬„ä½

## DIç§‘è¨ºæ–·æ¨™ç±¤æ˜ å°„é‚è¼¯èˆ‡æ¨™æº–æ–‡ä»¶ä¸€è‡´æ€§ä¿®å¾© (2025-01-30)

**Status: COMPLETED âœ…**

Successfully aligned DI module diagnostic tag mapping logic with `diagnostic_tags_summary.md` standard.

### å•é¡Œæè¿°:
ç”¨æˆ¶è¦æ±‚ç¢ºä¿DIç§‘çš„è¨ºæ–·æ¨™ç±¤æ˜ å°„é‚è¼¯èˆ‡ `diagnostic_tags_summary.md` æ–‡æª”ä¸­çš„æ¨™æº–å®Œå…¨ä¸€è‡´ï¼Œç‰¹åˆ¥æ˜¯åŸºæ–¼ `(æ™‚é–“è¡¨ç¾é¡åˆ¥, é¡Œå‹, å…§å®¹é ˜åŸŸ)` çš„ç²¾ç¢ºæ¨™ç±¤åˆ†é…ã€‚

### ä¿®å¾©éç¨‹:

**1. å»ºç«‹å®Œæ•´çš„DI_PARAM_ASSIGNMENT_RULESå­—å…¸:**
- å¯¦ç¾åŸºæ–¼ `(time_category, question_type, content_domain)` çš„ç²¾ç¢ºæ¨™ç±¤æ˜ å°„
- è¦†è“‹æ‰€æœ‰æ™‚é–“è¡¨ç¾é¡åˆ¥: Fast & Wrong, Normal Time & Wrong, Slow & Wrong, Slow & Correct
- æ”¯æ´æ‰€æœ‰DIé¡Œå‹: Data Sufficiency, Two-part analysis, Graph and Table, Multi-source reasoning
- å€åˆ†å…§å®¹é ˜åŸŸ: Math Related, Non-Math Related

**2. ä¿®æ­£è¡Œç‚ºæ¨™ç±¤æª¢æ¸¬é‚è¼¯:**

Mistake: è¡Œç‚ºæ¨™ç±¤æª¢æ¸¬é‚è¼¯ä¸ç¬¦åˆæ¨™æº–æ–‡ä»¶è¦å®š
Wrong:
```python
# ç²—å¿ƒæª¢æ¸¬ä½¿ç”¨éŒ¯èª¤çš„è¨ˆç®—åŸºæº–
fast_wrong_rate = fast_wrong_count / total_valid  # ä½¿ç”¨å…¨éƒ¨æœ‰æ•ˆé¡Œç›®ä½œåˆ†æ¯

# æ—©æœŸè¡åˆºæª¢æ¸¬é‚è¼¯éæ–¼ç°¡åŒ–
if q_time < avg_time * 0.5:  # ä½¿ç”¨å¹³å‡æ™‚é–“50%ä½œæ¨™æº–
```

Correct:
```python
# ç²—å¿ƒæª¢æ¸¬ä½¿ç”¨æ­£ç¢ºçš„è¨ˆç®—åŸºæº– - ç¬¦åˆæ¨™æº–æ–‡ä»¶
total_fast_questions = fast_wrong_mask.sum() + fast_correct_mask.sum()
fast_wrong_rate = fast_wrong_count / total_fast_questions  # ä½¿ç”¨å¿«é€Ÿä½œç­”é¡Œç›®ä½œåˆ†æ¯

# æ—©æœŸè¡åˆºæª¢æ¸¬åŸºæ–¼å‰1/3é¡Œç›®ä¸”ç”¨æ™‚<1åˆ†é˜
first_third_count = max(1, total_questions // 3)
if q_time < 1.0:  # ç”¨æ™‚ < 1åˆ†é˜
```

**3. ç¢ºä¿æ¨™ç±¤åç¨±å®Œå…¨ç¬¦åˆæ¨™æº–:**
- SFEæ¨™ç±¤: `DI_FOUNDATIONAL_MASTERY_INSTABILITY__SFE`
- è¡Œç‚ºæ¨™ç±¤: `DI_BEHAVIOR_CARELESSNESS_ISSUE`, `DI_BEHAVIOR_EARLY_RUSHING_FLAG_RISK`
- å…·é«”é¡Œç›®ç²—å¿ƒæ¨™ç±¤: `DI_BEHAVIOR_CARELESSNESS_DETAIL_OMISSION`

**4. å¯¦ç¾MSRé¡Œå‹ç‰¹æ®Šè™•ç†:**
- MSRé¡Œå‹åœ¨ Normal Time & Wrong å’Œ Slow & Wrong é¡åˆ¥ä¸­æ·»åŠ  `DI_MULTI_SOURCE_INTEGRATION_ERROR`
- MSRé¡Œå‹åœ¨å›°é›£é¡æ¨™ç±¤ä¸­æ·»åŠ  `DI_READING_COMPREHENSION_DIFFICULTY__MULTI_SOURCE_INTEGRATION`

### é—œéµæ”¹é€²:

**ç²¾ç¢ºçš„æ™‚é–“è¡¨ç¾åˆ†é¡æ˜ å°„:**
```python
DI_PARAM_ASSIGNMENT_RULES = {
    ('Fast & Wrong', 'Data Sufficiency', 'Math Related'): [
        'DI_READING_COMPREHENSION_ERROR__VOCABULARY',
        'DI_CONCEPT_APPLICATION_ERROR__MATH',
        # ... å®Œæ•´æ¨™ç±¤åˆ—è¡¨
    ],
    # ... è¦†è“‹æ‰€æœ‰ (æ™‚é–“é¡åˆ¥, é¡Œå‹, é ˜åŸŸ) çµ„åˆ
}
```

**æ”¹é€²çš„è¡Œç‚ºæ¨¡å¼æª¢æ¸¬:**
- ç²—å¿ƒå•é¡Œè§¸ç™¼é–¾å€¼: å¿«éŒ¯ç‡ > 25% (åŸºæ–¼å¿«é€Ÿä½œç­”é¡Œç›®)
- æ—©æœŸè¡åˆºæª¢æ¸¬: å‰1/3é¡Œç›®ä¸­å­˜åœ¨ç”¨æ™‚<1åˆ†é˜çš„é¡Œç›®
- å…·é«”é¡Œç›®æ¨™ç±¤: Fast & Wrong é¡Œç›®è‡ªå‹•æ·»åŠ ç´°ç¯€å¿½ç•¥æ¨™ç±¤

**æ¨™æº–åŒ–çš„æ¨™ç±¤åˆ†é…é‚è¼¯:**
- åŸºæ–¼æ¨™æº–åŒ–çš„é¡Œå‹å’Œé ˜åŸŸåç¨±æ˜ å°„
- ç²¾ç¢ºçš„æ™‚é–“è¡¨ç¾é¡åˆ¥è¨ˆç®—
- ç¬¦åˆMDæ–‡æª”çš„å®Œæ•´æ¨™ç±¤é›†åˆ

### ä¿®å¾©æ•ˆæœ:
1. âœ… DIç§‘è¨ºæ–·æ¨™ç±¤æ˜ å°„é‚è¼¯å®Œå…¨ç¬¦åˆ `diagnostic_tags_summary.md` æ¨™æº–
2. âœ… æ‰€æœ‰æ¨™ç±¤åç¨±èˆ‡æ–‡æª”å®Œå…¨ä¸€è‡´
3. âœ… è¡Œç‚ºæ¨™ç±¤æª¢æ¸¬é‚è¼¯ç²¾ç¢ºå¯¦ç¾æ¨™æº–è¦æ±‚
4. âœ… MSRé¡Œå‹ç‰¹æ®Šæ¨™ç±¤æ­£ç¢ºè™•ç†
5. âœ… SFEæª¢æ¸¬é‚è¼¯èˆ‡Vç§‘ã€Qç§‘ä¿æŒä¸€è‡´

**Result**: DIç§‘è¨ºæ–·æ¨¡çµ„ç¾åœ¨å®Œå…¨ç¬¦åˆè¨ºæ–·æ¨™ç±¤æ‘˜è¦æ–‡ä»¶çš„æ¨™æº–ï¼Œæä¾›ç²¾ç¢ºä¸”ä¸€è‡´çš„è¨ºæ–·æ¨™ç±¤åˆ†é…ã€‚

## DI è‹±æ–‡æ–‡æª”è¨ºæ–·æ¨™ç±¤å°é½Šä¿®å¾© (2025-06-01)

**Status: FIXED âœ…**

Successfully aligned English DI documentation diagnostic parameters with Chinese version.

### å•é¡Œæè¿°:
ç”¨æˆ¶è¦æ±‚å°‡è‹±æ–‡ç‰ˆæœ¬DIæ–‡æª” (en-gmat-di-v1.3.md) çš„é™„éŒ„è¨ºæ–·æ¨™ç±¤èˆ‡ä¸­æ–‡ç‰ˆæœ¬ (gmat-di-score-logic-dustin-v1.6.md) å°é½Šã€‚

### æ ¹æœ¬åŸå› :
è‹±æ–‡ç‰ˆæœ¬ä½¿ç”¨ç°¡åŒ–çš„è¨ºæ–·æ¨™ç±¤ç³»çµ±ï¼Œè€Œä¸­æ–‡ç‰ˆæœ¬ä½¿ç”¨è©³ç´°çš„ç´°åˆ†æ¨™ç±¤ç³»çµ±ã€‚

### ä¿®å¾©éç¨‹:

**ä¸»è¦å·®ç•°ç™¼ç¾:**
1. **é–±è®€ç†è§£æ¨™ç±¤:** è‹±æ–‡ç‰ˆæœ¬ä½¿ç”¨ `DI_READING_COMPREHENSION_ERROR`ï¼Œä¸­æ–‡ç‰ˆæœ¬ç´°åˆ†ç‚ºè©å½™ã€èªæ³•ã€é‚è¼¯ã€é ˜åŸŸå››å€‹å­é¡åˆ¥
2. **åœ–è¡¨è§£è®€æ¨™ç±¤:** è‹±æ–‡ç‰ˆæœ¬ä½¿ç”¨ `DI_GRAPH_TABLE_INTERPRETATION_ERROR`ï¼Œä¸­æ–‡ç‰ˆæœ¬åˆ†ç‚ºåœ–å½¢å’Œè¡¨æ ¼å…©å€‹å­é¡åˆ¥
3. **åƒæ•¸å‘½å:** ä¸­æ–‡ç‰ˆæœ¬ä½¿ç”¨é›™ä¸‹åŠƒç·šæ ¼å¼ (å¦‚ `__VOCABULARY`, `__MATH`)
4. **è¡Œç‚ºæ¨™ç±¤:** è‹±æ–‡ç‰ˆæœ¬ç¼ºå°‘è©³ç´°çš„è¡Œç‚ºé¡åˆ¥æ¨™ç±¤

Mistake: è‹±æ–‡DIæ–‡æª”ä½¿ç”¨ç°¡åŒ–çš„è¨ºæ–·æ¨™ç±¤ç³»çµ±
Wrong:
```markdown
| `DI_READING_COMPREHENSION_ERROR`           | DI é–±è®€ç†è§£: æ–‡å­—/é¡Œæ„ç†è§£éŒ¯èª¤/éšœç¤™ (Math/Non-Math) |
| `DI_GRAPH_TABLE_INTERPRETATION_ERROR`      | DI åœ–è¡¨è§£è®€: åœ–å½¢/è¡¨æ ¼ä¿¡æ¯è§£è®€éŒ¯èª¤/éšœç¤™            |
| `DI_CONCEPT_APPLICATION_ERROR`             | DI æ¦‚å¿µæ‡‰ç”¨ (Math): æ•¸å­¸è§€å¿µ/å…¬å¼æ‡‰ç”¨éŒ¯èª¤/éšœç¤™      |
```

Correct:
```markdown
| `DI_READING_COMPREHENSION_ERROR__VOCABULARY` | DI é–±è®€ç†è§£éŒ¯èª¤: è©å½™ç†è§£                          |
| `DI_READING_COMPREHENSION_ERROR__SYNTAX`     | DI é–±è®€ç†è§£éŒ¯èª¤: å¥å¼ç†è§£                          |
| `DI_READING_COMPREHENSION_ERROR__LOGIC`      | DI é–±è®€ç†è§£éŒ¯èª¤: é‚è¼¯ç†è§£                          |
| `DI_READING_COMPREHENSION_ERROR__DOMAIN`     | DI é–±è®€ç†è§£éŒ¯èª¤: é ˜åŸŸç†è§£                          |
| `DI_GRAPH_INTERPRETATION_ERROR__GRAPH`       | DI åœ–è¡¨è§£è®€éŒ¯èª¤: åœ–å½¢ä¿¡æ¯è§£è®€                      |
| `DI_GRAPH_INTERPRETATION_ERROR__TABLE`       | DI åœ–è¡¨è§£è®€éŒ¯èª¤: è¡¨æ ¼ä¿¡æ¯è§£è®€                      |
| `DI_CONCEPT_APPLICATION_ERROR__MATH`         | DI æ¦‚å¿µæ‡‰ç”¨ (æ•¸å­¸) éŒ¯èª¤: æ•¸å­¸è§€å¿µ/å…¬å¼æ‡‰ç”¨         |
```

### ä¿®å¾©å…§å®¹:

**1. å®Œæ•´æ›¿æ›é™„éŒ„Aè¨ºæ–·æ¨™ç±¤ç³»çµ±:**
- æ·»åŠ æŒ‰æ™‚é–“è¡¨ç¾åˆ†é¡çš„è©³ç´°è¨ºæ–·æ¨™ç±¤åˆ—è¡¨ (Fast & Wrong, Normal Time & Wrong, Slow & Wrong, Slow & Correct)
- åŒ…å«æ‰€æœ‰é–±è®€ç†è§£ç´°åˆ†é¡åˆ¥: VOCABULARY, SYNTAX, LOGIC, DOMAIN
- åŒ…å«åœ–è¡¨è§£è®€ç´°åˆ†é¡åˆ¥: GRAPH, TABLE
- åŒ…å«æ•¸å­¸å’Œéæ•¸å­¸é ˜åŸŸçš„è©³ç´°å€åˆ†
- æ·»åŠ MSRç‰¹å®šåƒæ•¸å’Œè¡Œç‚ºæ¨¡å¼åƒæ•¸

**2. çµ±ä¸€åƒæ•¸å‘½åæ ¼å¼:**
- ä½¿ç”¨é›™ä¸‹åŠƒç·šæ ¼å¼: `DI_CATEGORY__SUBCATEGORY`
- æ•¸å­¸ç›¸é—œæ¨™ç±¤ä½¿ç”¨ `__MATH` å¾Œç¶´
- éæ•¸å­¸ç›¸é—œæ¨™ç±¤ä½¿ç”¨ `__NON_MATH` å¾Œç¶´
- è¡Œç‚ºæ¨™ç±¤ä½¿ç”¨ `DI_BEHAVIOR__` å‰ç¶´

**3. æ·»åŠ å®Œæ•´çš„æ¨™ç±¤åˆ†é¡çµæ§‹:**
- Reading & Understanding (é–±è®€èˆ‡ç†è§£)
- Concept & Application (æ¦‚å¿µèˆ‡æ‡‰ç”¨)
- Logical Reasoning (é‚è¼¯æ¨ç†)
- Data Handling & Calculation (æ•¸æ“šè™•ç†èˆ‡è¨ˆç®—)
- MSR Specific (MSRç‰¹å®š)
- Question Type Specific (é¡Œå‹ç‰¹å®š)
- Foundational & Efficiency (åŸºç¤èˆ‡æ•ˆç‡)
- Behavior (è¡Œç‚º)

### ä¿®å¾©æ•ˆæœ:
1. âœ… è‹±æ–‡ç‰ˆæœ¬è¨ºæ–·æ¨™ç±¤å®Œå…¨èˆ‡ä¸­æ–‡ç‰ˆæœ¬ä¸€è‡´
2. âœ… æ¨™ç±¤å‘½åæ ¼å¼çµ±ä¸€ç‚ºè©³ç´°çš„ç´°åˆ†ç³»çµ±
3. âœ… æŒ‰æ™‚é–“è¡¨ç¾åˆ†é¡çš„è¨ºæ–·åƒæ•¸é«”ç³»å®Œæ•´
4. âœ… åŒ…å«æ‰€æœ‰MSRç‰¹å®šå’Œè¡Œç‚ºæ¨¡å¼æ¨™ç±¤
5. âœ… ä¿æŒäº†ä¸­è‹±æ–‡å°ç…§è¡¨çš„å®Œæ•´æ€§

**çµæœ:** è‹±æ–‡DIæ–‡æª”é™„éŒ„ç¾åœ¨èˆ‡ä¸­æ–‡ç‰ˆæœ¬å®Œå…¨ä¸€è‡´ï¼Œä½¿ç”¨ç›¸åŒçš„è©³ç´°è¨ºæ–·æ¨™ç±¤ç³»çµ±ï¼Œç¢ºä¿å…©å€‹ç‰ˆæœ¬çš„è¨ºæ–·åƒæ•¸é«”ç³»çµ±ä¸€ã€‚

## Vç§‘æ–‡æª” v1.6 ç‰ˆæœ¬ä¸€è‡´æ€§é©—è­‰å®Œæˆ (2025-06-01)

**Status: VERIFIED CONSISTENT âœ…**

Successfully verified Vç§‘ä¸­è‹±æ–‡æ–‡æª”ï¼ˆv1.6ç‰ˆæœ¬ï¼‰å·²å®Œå…¨ä¸€è‡´ï¼Œç„¡éœ€ä¿®å¾©ã€‚

### é©—è­‰ç¯„åœï¼š

**å…¨æ–‡æª”é€ç« ç¯€æ¯”å°:**
1. âœ… ç¬¬é›¶ç« ï¼šæ ¸å¿ƒè¼¸å…¥æ•¸æ“šå’Œé…ç½®
2. âœ… ç¬¬ä¸€ç« ï¼šæ•´é«”æ™‚é–“ç­–ç•¥èˆ‡æ•¸æ“šæœ‰æ•ˆæ€§è©•ä¼°
3. âœ… ç¬¬äºŒç« ï¼šå¤šç¶­åº¦è¡¨ç¾åˆ†æ
4. âœ… ç¬¬ä¸‰ç« ï¼šæ ¹æœ¬åŸå› è¨ºæ–·èˆ‡åˆ†æ
5. âœ… ç¬¬å››ç« ï¼šæ ¸å¿ƒæŠ€èƒ½/é¡Œå‹/é ˜åŸŸåƒè€ƒ
6. âœ… ç¬¬äº”ç« ï¼šç‰¹æ®Šæ¨¡å¼è§€å¯Ÿèˆ‡ç²—å¿ƒè©•ä¼°
7. âœ… ç¬¬å…­ç« ï¼šåŸºç¤èƒ½åŠ›è¦†è“‹è¦å‰‡
8. âœ… ç¬¬ä¸ƒç« ï¼šç·´ç¿’è¦åŠƒèˆ‡å»ºè­°
9. âœ… ç¬¬å…«ç« ï¼šè¨ºæ–·ç¸½çµèˆ‡å¾ŒçºŒè¡Œå‹•
10. âœ… é™„éŒ„Aï¼šè¨ºæ–·æ¨™ç±¤åƒæ•¸èˆ‡ä¸­æ–‡å°ç…§è¡¨

### ä¸€è‡´æ€§ç¢ºèªï¼š

**1. åƒæ•¸ç³»çµ±å®Œå…¨ä¸€è‡´ï¼š**
- è‹±æ–‡ç‰ˆæœ¬ä½¿ç”¨è©³ç´°çš„åˆ†å±¤è¨ºæ–·åƒæ•¸ç³»çµ±
- æ‰€æœ‰è¨ºæ–·åƒæ•¸å®Œå…¨å°æ‡‰ä¸­æ–‡ç‰ˆæœ¬
- åƒæ•¸å‘½åæ ¼å¼çµ±ä¸€ï¼ˆå¦‚ï¼š`CR_STEM_UNDERSTANDING_ERROR_QUESTION_REQUIREMENT_GRASP`ï¼‰
- SFEåƒæ•¸æ­£ç¢ºå‘½åï¼š`FOUNDATIONAL_MASTERY_APPLICATION_INSTABILITY_SFE`

**2. è¨ºæ–·æµç¨‹é‚è¼¯å®Œå…¨ä¸€è‡´ï¼š**
- Fast & Wrong, Normal Time & Wrong, Slow & Wrong, Slow & Correct è¨ºæ–·åƒæ•¸åˆ—è¡¨å®Œå…¨ç›¸åŒ
- æ™‚é–“è¡¨ç¾åˆ†é¡æ¨™æº–ä¸€è‡´
- SFEæª¢æ¸¬é‚è¼¯å®Œå…¨ç›¸åŒ
- è¡Œç‚ºæ¨¡å¼æª¢æ¸¬é‚è¼¯ä¸€è‡´

**3. é™„éŒ„Aå°ç…§è¡¨å®Œå…¨ä¸€è‡´ï¼š**
- åŒ…å«æ‰€æœ‰åˆ†å±¤è¨ºæ–·åƒæ•¸çš„å®Œæ•´æ˜ å°„
- è‹±æ–‡åƒæ•¸èˆ‡ä¸­æ–‡æè¿°å®Œå…¨å°æ‡‰
- åƒæ•¸åˆ†é¡çµæ§‹å®Œå…¨ç›¸åŒ

**4. ç« ç¯€çµæ§‹èˆ‡å…§å®¹å®Œå…¨ä¸€è‡´ï¼š**
- æ‰€æœ‰ç« ç¯€ç›®æ¨™ã€é‡é»ã€é‚è¼¯å®Œå…¨ç›¸åŒ
- è¨ºæ–·æ¨™ç±¤ç²¾ç¢ºæ€§é™åˆ¶èªªæ˜å®Œå…¨ç›¸åŒ
- æœªä¾†æ”¹é€²æ©Ÿåˆ¶èªªæ˜å®Œå…¨ç›¸åŒ
- æŠ€èƒ½è±å…è¦å‰‡å’Œè¦†è“‹è¦å‰‡å®Œå…¨ç›¸åŒ

### é©—è­‰çµæœï¼š
âœ… Vç§‘ä¸­è‹±æ–‡æ–‡æª”v1.6ç‰ˆæœ¬å·²å¯¦ç¾å®Œå…¨ä¸€è‡´æ€§
âœ… ç„¡éœ€ä»»ä½•ä¿®å¾©æˆ–èª¿æ•´
âœ… å…©å€‹ç‰ˆæœ¬å¯å®‰å…¨ä¸¦è¡Œä½¿ç”¨
âœ… è¨ºæ–·åƒæ•¸ç³»çµ±å®Œå…¨çµ±ä¸€

**çµè«–ï¼š** Vç§‘æ–‡æª”ä¸­è‹±æ–‡ç‰ˆæœ¬v1.6å·²é”åˆ°å®Œå…¨ä¸€è‡´ç‹€æ…‹ï¼Œè¨ºæ–·æ¡†æ¶å’ŒæŠ€è¡“è¦æ ¼å®Œå…¨å°é½Šã€‚ä¹‹å‰çš„ä¿®å¾©å·¥ä½œå·²æˆåŠŸå®Œæˆï¼Œç•¶å‰ç‰ˆæœ¬ç„¡éœ€é€²ä¸€æ­¥èª¿æ•´ã€‚

## DIè¨ºæ–·æ¨¡å¡Šè¦†è“‹è¦å‰‡é–¾å€¼ä¿®å¾© (2025-01-30)

**Status: COMPLETED âœ…**

Successfully fixed DI module override rule thresholds to match documentation standards.

### å•é¡Œæè¿°:
DIæ¨¡å¡Šä¸­çš„è¦†è“‹è¦å‰‡é–¾å€¼è¨­å®šèˆ‡æ¨™æº–æ–‡æª”ä¸ä¸€è‡´ï¼Œå¯¦ç¾ä¸­ä½¿ç”¨äº†éŒ¯èª¤ç‡40%å’Œè¶…æ™‚ç‡30%çš„é–¾å€¼ï¼Œè€Œæ–‡æª”è¦æ±‚ä½¿ç”¨50%å’Œ50%ã€‚

### æ ¹æœ¬åŸå› :
åœ¨`gmat_diagnosis_app/diagnostics/di_modules/analysis.py`æ–‡ä»¶ä¸­ï¼Œå…©å€‹å‡½æ•¸ä½¿ç”¨äº†éŒ¯èª¤çš„é–¾å€¼ï¼š
1. `calculate_override_conditions` å‡½æ•¸
2. `check_foundation_override` å‡½æ•¸

### ä¿®å¾©éç¨‹:

Mistake: DIæ¨¡å¡Šè¦†è“‹è¦å‰‡é–¾å€¼èˆ‡æ–‡æª”ä¸ä¸€è‡´
Wrong:
```python
# åœ¨ calculate_override_conditions å‡½æ•¸ä¸­
error_threshold = 0.4  # 40%
overtime_threshold = 0.3  # 30%

# åœ¨ check_foundation_override å‡½æ•¸ä¸­  
override_threshold_error = 0.4  # 40%
override_threshold_overtime = 0.3  # 30%
```

Correct:
```python
# åœ¨ calculate_override_conditions å‡½æ•¸ä¸­
error_threshold = 0.5  # 50% - ä¿®æ­£ç‚ºèˆ‡æ–‡æª”ä¸€è‡´
overtime_threshold = 0.5  # 50% - ä¿®æ­£ç‚ºèˆ‡æ–‡æª”ä¸€è‡´

# åœ¨ check_foundation_override å‡½æ•¸ä¸­
override_threshold_error = 0.5  # 50% - ä¿®æ­£ç‚ºèˆ‡æ–‡æª”ä¸€è‡´  
override_threshold_overtime = 0.5  # 50% - ä¿®æ­£ç‚ºèˆ‡æ–‡æª”ä¸€è‡´
```

### ä¿®å¾©æ•ˆæœ:
1. âœ… DIæ¨¡å¡Šè¦†è“‹è¦å‰‡é–¾å€¼å®Œå…¨ç¬¦åˆæ–‡æª”æ¨™æº–
2. âœ… éŒ¯èª¤ç‡å’Œè¶…æ™‚ç‡é–¾å€¼çµ±ä¸€ç‚º50%/50%
3. âœ… èˆ‡Q/Væ¨¡å¡Šä¿æŒä¸€è‡´çš„è¦†è“‹è¦å‰‡æ¨™æº–
4. âœ… è¨ºæ–·åƒæ•¸è§¸ç™¼æ¢ä»¶æ›´åŠ åš´æ ¼å’Œæº–ç¢º

### æŠ€è¡“èƒŒæ™¯:
æ ¹æ“šGMATè¨ºæ–·æ–‡æª”ç¬¬äº”ç« æ¨™æº–ï¼Œç•¶æŸé¡Œå‹æˆ–æŠ€èƒ½çš„éŒ¯èª¤ç‡æˆ–è¶…æ™‚ç‡è¶…é50%æ™‚æ‰è§¸ç™¼è¦†è“‹è¦å‰‡ï¼Œç”Ÿæˆç‰¹æ®Šçš„ç·´ç¿’å»ºè­°ã€‚æ­¤ä¿®å¾©ç¢ºä¿äº†DIæ¨¡å¡Šèˆ‡æ–‡æª”è¦ç¯„çš„å®Œå…¨ä¸€è‡´æ€§ã€‚

## DIè±å…è¦å‰‡æ–‡æª”ç¬¦åˆæ€§å„ªåŒ–å’ŒMSRéŒ¯èª¤è™•ç†æ”¹é€² (2025-01-30)

**Status: COMPLETED âœ…**

Successfully optimized DI exemption rules to fully comply with documentation standards and improved MSR time handling error recovery mechanisms.

### 1. è±å…è¦å‰‡æ–‡æª”ç¬¦åˆæ€§å„ªåŒ–

**å•é¡Œæè¿°:**
DIè±å…è¦å‰‡å¯¦ç¾åŸºæœ¬æ­£ç¢ºï¼Œä½†éœ€è¦æ›´æ˜ç¢ºåœ°éµå¾ªæ–‡æª”ç¬¬äº”ç« æ¨™æº–ï¼Œç‰¹åˆ¥æ˜¯æœ‰æ•ˆé¡Œç›®ç¯©é¸å’Œæ¢ä»¶æª¢æŸ¥ã€‚

**ä¿®å¾©éç¨‹:**

Mistake: è±å…è¦å‰‡é‚è¼¯å¯ä»¥æ›´æ˜ç¢ºåœ°éµå¾ªæ–‡æª”æ¨™æº–
Wrong:
```python
# ç°¡åŒ–çš„è±å…æ¢ä»¶æª¢æŸ¥
if not group_df.empty and not ((group_df['is_correct'] == False) | (group_df['overtime'] == True)).any():
    exempted_type_domain_combinations.add((q_type, domain))
```

Correct:
```python
# æŒ‰ç…§æ–‡æª”ç¬¬äº”ç« æ¨™æº–ï¼šé¦–å…ˆç¯©é¸æœ‰æ•ˆé¡Œç›®
valid_questions = group_df[group_df.get('is_invalid', False) == False]
if valid_questions.empty:
    continue  # å¦‚æœæ²’æœ‰æœ‰æ•ˆé¡Œç›®ï¼Œè·³éæ­¤çµ„åˆ

# æ¢ä»¶ä¸€ï¼šæ‰€æœ‰æœ‰æ•ˆé¡Œç›®å¿…é ˆå…¨éƒ¨æ­£ç¢º 
condition1_all_correct = valid_questions['is_correct'].all()

# æ¢ä»¶äºŒï¼šæ‰€æœ‰æœ‰æ•ˆé¡Œç›®å¿…é ˆå…¨éƒ¨ç„¡è¶…æ™‚
condition2_no_overtime = ~valid_questions['overtime'].any()

# åŒæ™‚æ»¿è¶³å…©å€‹æ¢ä»¶æ‰è±å…
if condition1_all_correct and condition2_no_overtime:
    exempted_type_domain_combinations.add((q_type, domain))
```

### 2. MSRæ™‚é–“è™•ç†éŒ¯èª¤è™•ç†æ©Ÿåˆ¶æ”¹é€²

**å•é¡Œæè¿°:**
MSRæ™‚é–“è™•ç†åœ¨å¤šå€‹å±¤ç´šå­˜åœ¨éŒ¯èª¤è™•ç†ï¼Œä½†å»ºè­°ç”Ÿæˆéšæ®µçš„éŒ¯èª¤è™•ç†å¯ä»¥æ›´åŠ è©³ç´°å’Œå¥å£¯ã€‚

**ç™¼ç¾çš„ä¸‰å±¤éŒ¯èª¤è™•ç†æ¶æ§‹:**
1. **æ•¸æ“šé è™•ç†éšæ®µ**: è™•ç†MSRçµ„è­˜åˆ¥ã€é–±è®€æ™‚é–“è¨ˆç®—çš„æ•¸æ“šç¼ºå¤±å•é¡Œ
2. **è¶…æ™‚è¨ˆç®—éšæ®µ**: è™•ç†ç¾¤çµ„è¶…æ™‚å’Œå€‹åˆ¥è¶…æ™‚è¨ˆç®—ä¸­çš„æ•¸æ“šç¼ºå¤±
3. **å»ºè­°ç”Ÿæˆéšæ®µ**: è™•ç†æ™‚é–“é™åˆ¶å»ºè­°è¨ˆç®—ä¸­çš„æ•¸æ“šå•é¡Œ

**ä¿®å¾©éç¨‹:**

Mistake: MSRå»ºè­°ç”Ÿæˆéšæ®µçš„éŒ¯èª¤è™•ç†ä¸å¤ è©³ç´°
Wrong:
```python
triggering_group_ids = group_df['msr_group_id'].unique()
group_times = df_diagnosed[df_diagnosed['msr_group_id'].isin(triggering_group_ids)]['msr_group_total_time']
if group_times.notna().any():
    max_group_time_minutes = group_times.max()
    # ç°¡åŒ–çš„éŒ¯èª¤è™•ç†...
```

Correct:
```python
triggering_group_ids = group_df['msr_group_id'].unique()
# éæ¿¾æ‰NaNçš„group_id
triggering_group_ids = [gid for gid in triggering_group_ids if pd.notna(gid)]

if triggering_group_ids:
    group_times = df_diagnosed[df_diagnosed['msr_group_id'].isin(triggering_group_ids)]['msr_group_total_time']
    valid_group_times = group_times.dropna()
    
    if len(valid_group_times) > 0:
        max_group_time_minutes = valid_group_times.max()
        if pd.notna(max_group_time_minutes) and max_group_time_minutes > 0:
            # æ­£å¸¸è¨ˆç®—é‚è¼¯...
        else: 
            logging.warning(f"[DI Case Reco MSR] Invalid max_group_time_minutes...")
            max_z_minutes = 6.0
    else: 
        logging.warning(f"[DI Case Reco MSR] No valid group times found...")
        max_z_minutes = 6.0
```

### ä¿®å¾©æ•ˆæœ:
1. âœ… DIè±å…è¦å‰‡å®Œå…¨ç¬¦åˆæ–‡æª”ç¬¬äº”ç« æ¨™æº–
2. âœ… æ˜ç¢ºå€åˆ†æœ‰æ•ˆé¡Œç›®ç¯©é¸å’Œæ¢ä»¶æª¢æŸ¥
3. âœ… MSRæ™‚é–“è™•ç†éŒ¯èª¤è™•ç†æ›´åŠ å¥å£¯
4. âœ… å¢åŠ è©³ç´°çš„è­¦å‘Šæ—¥èªŒå”åŠ©èª¿è©¦
5. âœ… å¤šå±¤ç´šçš„éŒ¯èª¤å›é€€æ©Ÿåˆ¶ç¢ºä¿ç³»çµ±ç©©å®šæ€§

**æŠ€è¡“æ”¹é€²:**
- è±å…è¦å‰‡æŒ‰ç…§æ–‡æª”æ¨™æº–å…ˆç¯©é¸æœ‰æ•ˆé¡Œç›®ï¼Œå†æª¢æŸ¥å…©å€‹æ¢ä»¶
- MSRéŒ¯èª¤è™•ç†å¢åŠ NaNéæ¿¾ã€æ•¸æ“šæœ‰æ•ˆæ€§æª¢æŸ¥ã€è©³ç´°è­¦å‘Š
- ä¿æŒ6.0åˆ†é˜çš„é»˜èªå›é€€å€¼ï¼Œç¢ºä¿MSRå»ºè­°ç”Ÿæˆä¸æœƒå¤±æ•—

## ä¸‰ç§‘è¨ºæ–·å ±å‘Šèªè¨€åˆ‡æ›å³æ™‚æ›´æ–°ä¿®å¾© (2025-01-30)

**Status: COMPLETED âœ…**

Successfully implemented real-time language switching for diagnostic reports in all three subjects (Q, V, DI).

### å•é¡Œæè¿°:
ç”¨æˆ¶åæ˜ ä¸‰å€‹ç§‘ç›®çš„æ–‡å­—è¨ºæ–·å ±å‘Šåœ¨i18nèªè¨€åˆ‡æ›å¾Œæ²’æœ‰å³æ™‚æ›´æ–°ï¼Œéœ€è¦é‡æ–°ç”Ÿæˆå ±å‘Šæ‰æœƒé¡¯ç¤ºæ–°èªè¨€ã€‚

### æ ¹æœ¬åŸå› :
è¨ºæ–·å ±å‘Šçš„å…§å®¹åœ¨åˆ†æå®Œæˆæ™‚ç”Ÿæˆç‚ºå®Œæ•´çš„æ–‡å­—å­—ç¬¦ä¸²ï¼Œä¸¦å­˜å„²åœ¨`st.session_state.report_dict`ä¸­ã€‚é€™äº›å…§å®¹æ˜¯å›ºå®šå­—ç¬¦ä¸²è€Œéå‹•æ…‹ç¿»è­¯éµï¼Œå› æ­¤èªè¨€åˆ‡æ›æ™‚ä¸æœƒè‡ªå‹•æ›´æ–°ã€‚

### ä¿®å¾©éç¨‹:

**1. å‰µå»ºå ±å‘Šé‡æ–°ç”Ÿæˆæ©Ÿåˆ¶**

åœ¨`gmat_diagnosis_app/utils/report_regeneration.py`ä¸­å¯¦ç¾äº†å®Œæ•´çš„å ±å‘Šé‡æ–°ç”Ÿæˆé‚è¼¯ï¼š

Mistake: è¨ºæ–·å ±å‘Šä½¿ç”¨å›ºå®šæ–‡å­—å­˜å„²ï¼Œèªè¨€åˆ‡æ›æ™‚ä¸æœƒæ›´æ–°
Wrong:
```python
# èªè¨€åˆ‡æ›æ™‚åªæ›´æ–°i18nç³»çµ±ï¼Œå ±å‘Šå…§å®¹ä¸è®Š
if selected_language != current_lang:
    st.session_state.current_language = selected_language
    set_language(selected_language)
    st.rerun()
```

Correct:
```python
# èªè¨€åˆ‡æ›æ™‚é‡æ–°ç”Ÿæˆè¨ºæ–·å ±å‘Š
if selected_language != current_lang:
    st.session_state.current_language = selected_language
    set_language(selected_language)
    
    # Re-generate diagnostic reports if analysis is complete
    if st.session_state.get("diagnosis_complete", False) and st.session_state.get("processed_df") is not None:
        from gmat_diagnosis_app.utils.report_regeneration import regenerate_reports_for_language_switch
        regenerate_reports_for_language_switch()
    
    st.rerun()
```

**2. å¯¦ç¾å®Œæ•´çš„é‡æ–°ç”Ÿæˆå‡½æ•¸**

```python
def regenerate_reports_for_language_switch():
    """
    Regenerate diagnostic reports when language is switched.
    Re-runs the diagnosis logic on existing processed data to get reports in the new language.
    """
    # é‡æ–°ç²å–è™•ç†éçš„æ•¸æ“š
    df_final = st.session_state.get("processed_df")
    
    # æ¢å¾©æ™‚é–“å£“åŠ›è¨­å®š
    time_pressure_map = {}
    for subject in SUBJECTS:
        time_pressure_key = f"{subject.lower()}_time_pressure"
        # ... æ¢å¾©é‚è¼¯ ...
    
    # é‡æ–°ç”Ÿæˆæ¯å€‹ç§‘ç›®çš„å ±å‘Š
    temp_report_dict = {}
    for subject in SUBJECTS:
        if subject == 'Q':
            subj_results, subj_report, df_subj_diagnosed = diagnose_q(df_subj)
        elif subject == 'DI':
            subj_results, subj_report, df_subj_diagnosed = run_di_diagnosis_processed(df_subj, time_pressure)
        elif subject == 'V':
            subj_results, subj_report, df_subj_diagnosed = run_v_diagnosis_processed(df_subj, time_pressure, v_avg_time_per_type)
        
        temp_report_dict[subject] = final_report_for_subject
    
    # æ›´æ–°session state
    st.session_state.report_dict = temp_report_dict
    
    # é‡æ–°ç”ŸæˆAIç¶œåˆå ±å‘Šï¼ˆå¦‚æœ‰ï¼‰
    if st.session_state.get('master_key'):
        consolidated_report = generate_ai_consolidated_report(temp_report_dict, st.session_state.master_key)
        st.session_state.consolidated_report = consolidated_report
```

### ä¿®å¾©æ•ˆæœ:
1. âœ… ä¸‰å€‹ç§‘ç›®è¨ºæ–·å ±å‘Šæ”¯æŒå³æ™‚èªè¨€åˆ‡æ›
2. âœ… èªè¨€åˆ‡æ›æ™‚è‡ªå‹•é‡æ–°ç”Ÿæˆå ±å‘Šå…§å®¹
3. âœ… ä¿æŒåŸæœ‰è¨ºæ–·é‚è¼¯å’Œæ•¸æ“šå®Œæ•´æ€§
4. âœ… AIç¶œåˆå ±å‘Šä¹Ÿæœƒé‡æ–°ç”Ÿæˆï¼ˆå¦‚é©ç”¨ï¼‰
5. âœ… ç”¨æˆ¶é«”é©—æ”¹å–„ï¼šç„¡éœ€é‡æ–°åˆ†æå³å¯çœ‹åˆ°æ–°èªè¨€å ±å‘Š

### æŠ€è¡“å¯¦ç¾:
- åœ¨èªè¨€åˆ‡æ›é‚è¼¯ä¸­æª¢æ¸¬æ˜¯å¦å·²æœ‰è¨ºæ–·çµæœ
- å¦‚æœ‰çµæœå‰‡èª¿ç”¨å ±å‘Šé‡æ–°ç”Ÿæˆå‡½æ•¸
- é‡æ–°ç”Ÿæˆéç¨‹å¾©ç”¨åŸæœ‰è¨ºæ–·é‚è¼¯ï¼Œç¢ºä¿ä¸€è‡´æ€§
- ä¿æŒæ™‚é–“å£“åŠ›è¨­å®šå’Œå…¶ä»–åˆ†æåƒæ•¸
- æ”¯æŒOpenAIå ±å‘Šç¸½çµåŠŸèƒ½çš„é‡æ–°ç”Ÿæˆ

**ç”¨æˆ¶å½±éŸ¿:** ç¾åœ¨ç”¨æˆ¶å¯ä»¥åœ¨æŸ¥çœ‹çµæœæ™‚éš¨æ™‚åˆ‡æ›èªè¨€ï¼Œè¨ºæ–·å ±å‘Šæœƒç«‹å³ä»¥æ–°èªè¨€é¡¯ç¤ºï¼Œå¤§å¹…æå‡äº†å¤šèªè¨€ä½¿ç”¨é«”é©—ã€‚